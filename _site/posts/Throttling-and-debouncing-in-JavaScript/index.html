<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css"><title>Throttling and debouncing in JavaScript</title><meta name="description" content="Both technique reduce the trigger rate to optimize resource usage, so it’s a compromise between the resolution of tracking the user actions, and optimal resource usage."><link rel="stylesheet" type="text/css" href="/static/css/style.css"><link rel="stylesheet" type="text/css" href="/static/css/prism-tomorrow.css"></head><body><header class="header-nav"><a href="/" class="logo">Tuple Log<nav><a @click="isOpen = false" class="nav-link" href="/blog">Blog</a></nav></a></header><main class="main detail"><article class="blog"><h1 class="heading">Throttling and debouncing in JavaScript</h1><p class="text-base"><time>11 Jun 2021</time></p><article class="blog-content"><p>Throttling and Debouncing, both technique reduce the trigger rate to optimize resource usage, so it’s a compromise between the resolution of tracking the user actions, and optimal resource usage. Good news is that both these techniques can be applied and unapplied with absolutely no change to the event listener code.</p><p><strong>Throttling</strong> is a straightforward reduction of the trigger rate. It will cause the event listener to ignore some portion of the events while still firing the listeners at a constant (but reduced) rate. <em>One very common example is scrolling where you want your interface to react in response to the scroll position (e.g., real and fake parallax effects, sticky menus, etc).</em> Throttling can be implemented several ways. You can throttle by the number of events triggered, or by the rate (number of events per unit time), or by the delay between two handled events.</p><p>Let’s first hear it in plain English:</p><ol><li>I will take a function and the minimal timing between two events</li><li>I will return a stand-in function that will be throttled</li><li>The stand-in function will record the time of each call to the original listener</li><li>The stand-in will compare the time of the current event with the last time it invoked the original handler, and will neglect to invoke the handler if the time difference is less than the delay</li></ol><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// ES6 code</span><br><span class="token keyword">function</span> <span class="token function">throttled</span><span class="token punctuation">(</span><span class="token parameter">delay<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> lastCall <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> lastCall <span class="token operator">&lt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    lastCall <span class="token operator">=</span> now<span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token keyword">const</span> <span class="token function-variable function">myHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token comment">// do something with the event</span><br><span class="token keyword">const</span> tHandler <span class="token operator">=</span> <span class="token function">throttled</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> myHandler<span class="token punctuation">)</span><span class="token punctuation">;</span><br>domNode<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> tHandler<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>debouncing is a technique of keeping the trigger rate at exactly 0 until a period of calm, and then triggering the listener exactly once.Debouncing is used when you don’t need to track every move user makes as long as you can make a timely response.</p><p>Debouncing can be implemented using <code>setTimeout()</code> and <code>clearTimeout()</code>. It normally takes a value in milliseconds that represents the wait period before the listener is triggered.</p><p>Here it is in plain English:</p><ol><li>Take a delay in milliseconds and a handler function</li><li>Return a stand-in debounced function</li><li>When the stand-in is invoked, schedule the original listener to be invoked after the specified delay</li><li>When the stand-in function is invoked again, cancel the previously scheduled call, and schedule a new one after the delay</li><li>When calls to the stand-in function do not happen for a while, the scheduled call to the listener will finally go through</li></ol><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// ES6</span><br><span class="token keyword">function</span> <span class="token function">debounced</span><span class="token punctuation">(</span><span class="token parameter">delay<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> timerId<span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>timerId<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    timerId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      timerId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">myHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token comment">// do something with the event</span><br><span class="token keyword">const</span> dHandler <span class="token operator">=</span> <span class="token function">debounced</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> myHandler<span class="token punctuation">)</span><span class="token punctuation">;</span><br>domNode<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> dHandler<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></article></article></main><footer>© 2022-2023 tuplelog.com. All rights reserved.</footer><script src="/static/js/alpine.js"></script><script>if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }</script></body></html>