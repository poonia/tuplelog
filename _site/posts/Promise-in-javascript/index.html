<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css"><title>Promise in Javascript</title><meta name="description" content="Promises are an alternative way to manage your asynchronous code in JavaScript."><link rel="stylesheet" type="text/css" href="/static/css/style.css"><link rel="stylesheet" type="text/css" href="/static/css/prism-tomorrow.css"></head><body><header class="header-nav"><a href="/" class="logo">Tuple Log<nav><a @click="isOpen = false" class="nav-link" href="/blog">Blog</a></nav></a></header><main class="main detail"><article class="blog"><h1 class="heading">Promise in Javascript</h1><p class="text-base"><time>11 Jun 2021</time></p><article class="blog-content"><h4>Lets understand Callback function</h4><p>A callback function (say, Y) is a function that is passed to another function (say, X) as a parameter, and Y gets executed inside X.</p><p>JavaScript uses callback functions to handle asynchronous control flow.</p><pre class="language-jsx"><code class="language-jsx"><span class="token function">$</span><span class="token punctuation">(</span> <span class="token string">"#dataRow"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span> <span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <br>  <span class="token function">alert</span><span class="token punctuation">(</span>‘hello’<span class="token punctuation">)</span><span class="token punctuation">;</span> <br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4>How Callback function work?</h4><pre class="language-jsx"><code class="language-jsx">  <span class="token keyword">function</span> <span class="token function">writeCode</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <br>    <span class="token comment">//do something and after that call the callback(); //…..  </span><br>    <span class="token punctuation">}</span></code></pre><h4>What are promises?</h4><p>Promises are an alternative way to manage your asynchronous code in JavaScript. A promise is an object who represents the result of an asynchronous operation. It is a place holder for a value that will become available in the future.</p><h4>Promises states</h4><ul><li>PENDING - The initial state of a promise.</li><li>RESOLVED - a successful operation - returns a Value.</li><li>REJECTED - a failed operation - throws an exception. has a 'Reason' property.</li><li>SETTLED - means either resolved or rejected Once a promise is settled, it is immutable and cannot be changed.</li></ul><p>Create → Use → Flow</p><h4>Creating Promises</h4><p><code>new Promise( )</code></p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token comment">/*  some condition  */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'reject'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//success</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//reject</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">get_user</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <br>	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://somedomain.com/api/users/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">user_data</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        	<span class="token keyword">if</span><span class="token punctuation">(</span>user_data<span class="token punctuation">.</span>active<span class="token punctuation">)</span> <span class="token function">resolve</span><span class="token punctuation">(</span>user_data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">else</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'This user is not active any longer'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>            <span class="token comment">//reject due to an application logical error</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//reject due to a communication error</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>Promisification</p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">function</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token parameter">filename<span class="token punctuation">,</span> enc</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <br><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br><br>     fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> enc<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>       <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span><br>       <span class="token keyword">else</span> <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><br>     <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre><p>USE</p><p><code>Promise.prototype.then( )</code></p><pre class="language-jsx"><code class="language-jsx"><span class="token function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><br><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>on_resolved<span class="token punctuation">,</span> on_rejected<span class="token punctuation">)</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token function">get_user</span><span class="token punctuation">(</span><span class="token number">862726</span><span class="token punctuation">)</span><br><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">user_data</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user_data<span class="token punctuation">)</span> <span class="token comment">//success...</span><br><span class="token punctuation">,</span><span class="token parameter">err</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//failure...</span></code></pre><p>Chaining Promises</p><p>&quot;<em>a Promise handler always return another Promise</em>&quot;<em>therefore it can be chained to other Promises</em></p><pre class="language-jsx"><code class="language-jsx"><span class="token function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><br>	 <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>on_resolved_1<span class="token punctuation">,</span> on_rejected_1<span class="token punctuation">)</span><br>         <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>on_resolved_2<span class="token punctuation">)</span><br>         <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> on_rejected_2<span class="token punctuation">)</span></code></pre><p>Promise.prototype.catch( )</p><pre class="language-jsx"><code class="language-jsx"><span class="token function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><br>	 <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> on_rejected<span class="token punctuation">)</span></code></pre><p>↓</p><pre class="language-jsx"><code class="language-jsx"><span class="token function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><br>	 <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>on_rejected<span class="token punctuation">)</span></code></pre><p>Chaining Promises( )</p><pre class="language-jsx"><code class="language-jsx"><span class="token function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>step1<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>step2<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>step3<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>step4<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            <span class="token comment">// The chain is broken and goes to the catch</span><br>            <span class="token comment">// Handle any errors from all above steps</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>step1<span class="token punctuation">,</span>on_get_user_reject<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>step2<span class="token punctuation">,</span>on_step1_reject<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>step3<span class="token punctuation">,</span>on_step2_reject<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>step4<span class="token punctuation">,</span>on_step3_reject<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            <span class="token comment">// The chain is NOT broken</span><br>            <span class="token comment">// Handle any errors from step4</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>FLOW</p><p>Promise.each()</p><p><em><strong>Serial</strong> iteration on a collection and then...</em></p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    Promise<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> <span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <br>      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span><span class="token punctuation">)</span><br>                  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Finished item: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">origin_array</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">All tasks are done now... </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>origin_array<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=></span> <br>        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Promise.map()</p><p><em><strong>Parallel</strong> iteration on a collection and then...</em></p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    Promise<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>items<span class="token punctuation">,</span> <span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>        <br>        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span> <span class="token punctuation">{</span><br>              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Finished item: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <br>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">concurrency</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//adjust concurrency...</span><br>    <br>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'All tasks are done now...'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br>    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Promise.all()</p><p><em><strong>Parallel</strong></em> <em>execution of different async operationsand then...</em></p><pre class="language-jsx"><code class="language-jsx">Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>pending_promises_Array<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">items</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'All operations are complete!'</span><span class="token punctuation">,</span> <span class="token string">'items: '</span><span class="token punctuation">,</span>items<span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=></span>  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> err<span class="token punctuation">.</span>message <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ul><li><em>input - an array of promises</em></li><li><em>output an array of results values - (ordered respectively to the original array order!)</em></li></ul><p>Promise.race()</p><p><em>The .then( )</em> handler runs after the first async operation is complete</p><pre class="language-jsx"><code class="language-jsx">Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span>pending_promises_Array<span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The first operation is complete!, first item: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>Promise.some()</p><p><em>Similar to race()</em></p><p><em>The .then()</em> <em>handler runs after the (n)th async operation is complete</em></p><pre class="language-jsx"><code class="language-jsx">Promise<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>pending_promises_Array<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">first<span class="token punctuation">,</span> second</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">first: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>first<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, second: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>second<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <br>        <span class="token punctuation">}</span><span class="token punctuation">)</span>      <br>        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <br>        <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></article></article></main><footer>© 2022-2023 tuplelog.com. All rights reserved.</footer><script src="/static/js/alpine.js"></script><script>if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }</script></body></html>